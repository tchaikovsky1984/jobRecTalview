table:
  name: recommendation
  schema: public
object_relationships:
  - name: job
    using:
      manual_configuration:
        column_mapping:
          job_id: id
        insertion_order: null
        remote_table:
          name: job
          schema: public
  - name: resume
    using:
      manual_configuration:
        column_mapping:
          res_id: id
        insertion_order: null
        remote_table:
          name: resume
          schema: public
array_relationships:
  - name: prep
    using:
      foreign_key_constraint_on:
        column: recommendation_id
        table:
          name: interview_prep
          schema: public
select_permissions:
  - role: user
    permission:
      columns:
        - id
        - res_id
        - job_id
        - score
        - analysis_date
        - reasoning
        - skill_matches
        - skill_misses
      filter:
        resume:
          user_id:
            _eq: X-Hasura-User-Id
      allow_aggregations: true
